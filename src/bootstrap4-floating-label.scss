/**
 * Other implementations:
 * - https://www.jquery-az.com/boots/demo.php?ex=52.0_3
 * - https://www.primefaces.org/primereact/#/inputtext
 * - https://getbootstrap.com/docs/4.1/examples/floating-labels/
 * - https://github.com/tonystar/bootstrap-float-label
 * - https://lusaxweb.github.io/vuesax/components/input.html#label-placeholder
 *   https://github.com/lusaxweb/vuesax/blob/master/src/components/vsInput/main.styl
 */

 .form-group {
  // See https://github.com/twbs/bootstrap/blob/v4.1.3/scss/_reboot.scss#L313
  margin-top: $form-group-margin-bottom + $label-margin-bottom;

  // Initial state: the label is inside the input
  > input + label,
  > textarea + label {
    // Found here: https://stackoverflow.com/a/951888/990356
    display: block;
    height: 0;

    // See https://github.com/twbs/bootstrap/blob/v4.1.3/scss/_variables.scss#L241
    transition: $transition-base;

    @extend %label-inside-input;
  }

  // Initial state: hide the placeholder
  > input::placeholder,
  > textarea::placeholder {
    color: transparent;
    transition: color 0.15s linear; // See https://github.com/twbs/bootstrap/blob/v4.1.3/scss/_variables.scss#L242
  }
  // Except if <label> is before <input> => not a floating label
  > label + input::placeholder,
  > label + textarea::placeholder {
    color: inherit;
  }

  // When the input is focused:
  > input:focus,
  > textarea:focus {
    // - show the placeholder
    &::placeholder {
      color: inherit;
    }

    // - move the label above the input
    + label {
      @extend %label-above-input;
    }
  }
}

%label-inside-input {
  background-color: transparent;

  transform: translateY(calc(#{- $font-size-base * $line-height-base - $label-margin-bottom} + #{$input-border-width}));

  // See https://github.com/twbs/bootstrap/blob/v4.1.3/scss/_variables.scss#L410
  margin-left: calc(#{$input-padding-x} + #{$input-border-width});
}

%label-above-input {
  // Hack to hide the input border under the label
  background-color: $input-bg;

  // ch = width of the character "0", see https://developer.mozilla.org/en-US/docs/Web/CSS/length#Units
  padding-left: .5ch;
  padding-right: .5ch;

  transform: translateY(
    calc(
      #{- $font-size-base * $line-height-base - $label-margin-bottom} + #{$input-border-width}
      - #{$font-size-base * $input-line-height}
    )
  );

  margin-left: calc((#{$input-padding-x} + #{$input-border-width}) - .5ch);
  margin-right: 0;

  font-size: $font-size-sm;
}
